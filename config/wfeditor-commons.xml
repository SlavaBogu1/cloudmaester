<mxEditor defaultGroup="group" defaultEdge="edge"
	helpWindowImage="images/help.gif"
	tasksWindowImage="images/tasks.gif"
	forcedInserting="0"
	swimlaneRequired="0">
	<include name="config/editor-commons.xml"/>
        <!-- 
        Add onInit function
        this - mxEditor
        -->
        <add as="onInit">
		function () {
		    //debugger;
                    this.showTasks();
		}
	</add>
	<Array as="cycleAttributeValues">
		<add value="#83027F"/>
		<add value="#66B922"/>
		<add value="#808913"/>
		<add value="#CF0056"/>
		<add value="#4679B6"/>
	</Array>
	<Array as="templates">
            <condition name="it_is_compute"><![CDATA[
                function (editor, cell, evt) {                  
                    debugger;
                    var res = cell.value.attributes["template"].textContent;                                        
                    // this is wrong place - need to find "creation" of object.
                    //var label = cell.value.attributes["label"].textContent;
                    //label = label + "</br>" + cell.value.attributes["default"].textContent;
                    //cell.value.attributes["label"].value = label;
                    //be aware of multi-call 
                    return (res === "aws_compute");
                }
            ]]></condition>            
		<add as="group">
			<Group label="" description="" href="">
				<mxCell vertex="1" style="group" connectable="0"/>
			</Group>
		</add>
		<add as="edge">
			<Edge label="" description="">
				<mxCell edge="1">
					<mxGeometry as="geometry" relative="1"/>
				</mxCell>
			</Edge>
		</add>
<!--
                <add as="swimlane">
			<Swimlane label="AWS Location" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
-->                
		<add as="swl_na">
			<Swimlane label="AWS North America" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
		<add as="swl_apac">
			<Swimlane label="AWS Asia and Pacific" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
		<add as="swl_europe">
			<Swimlane label="AWS Europe" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
		<add as="swl_sa">
			<Swimlane label="AWS South America" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
		<add as="swl_op">
			<Swimlane label="On-premises" description="" href="">
				<mxCell vertex="1" style="swimlane" connectable="0">
					<mxGeometry as="geometry" width="800" height="350"/>
				</mxCell>
			</Swimlane>
		</add>
                <add as="aws_compute">
			<Task template="aws_compute" default="EC2" label="AWS Compute" description="Amazon Cloud Compute services" href="https://aws.amazon.com/products/?nc2=h_m1">
                            <mxCell vertex="1">	
                                    <mxGeometry as="geometry" width="72" height="72"/>                                        
                            </mxCell>
			</Task>
		</add>
                <add as="aws_storage">
			<Task template="aws_storage" default="S3" label="AWS Storage" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_database">
			<Task label="AWS Database" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_migration">
			<Task label="AWS Migration" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_networking">
			<Task label="AWS Networking Content Delivery" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_developer">
			<Task label="AWS Networking Content Delivery" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_management">
			<Task label="AWS Management Tools" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_media">
			<Task label="AWS Media Services" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_ai">
			<Task label="AWS Machine Learning" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_analytics">
			<Task label="AWS Analytics" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_security">
			<Task label="AWS Security Identity Compliance" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_costmanagement">
			<Task label="AWS Cost Management" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_reality">
			<Task label="AWS AR VR" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_applications">
			<Task label="Application Integration" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_messaging">
			<Task label="AWS Customer Engagement" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_enterprise">
			<Task label="AWS Business Productivity" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_desktop">
			<Task label="AWS Desktop App Streaming" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_iot">
			<Task label="AWS Internet of Things" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                <add as="aws_game">
			<Task label="Game Development" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
                
<!--
                <add as="task">
			<Task label="Task" description="" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Task>
		</add>
-->                
		<add as="subprocess">
			<Subprocess label="Subprocess" description="" href="">
				<mxCell vertex="1" style="rounded">		
					<mxGeometry as="geometry" width="72" height="32"/>
				</mxCell>
			</Subprocess>
		</add>
<!--                
		<add as="shape">
			<Shape label="shape" description="" href="">
				<mxCell vertex="1" style="ellipse">		
					<mxGeometry as="geometry" width="72" height="72"/>
				</mxCell>
			</Shape>
		</add>
-->                
		<add as="ami_win">
			<Symbol label="AMI Windows 2016" description="Microsoft Windows Server 2016 with SQL Server 2017 Web" href="https://aws.amazon.com/marketplace/pp/B0765D7PGL">
				<mxCell vertex="1" style="symbol;image=images/ami/windows/windows-server.png">		
					<mxGeometry as="geometry" width="32" height="32"/>
				</mxCell>
			</Symbol>
		</add>
		<add as="ami_linux">
			<Symbol label="AMI Linux" description="Linux" href="https://aws.amazon.com/amazon-linux-ami/2012.03-packages/">
				<mxCell vertex="1" style="symbol;image=images/ami/linux/linux.png">		
					<mxGeometry as="geometry" width="32" height="32"/>
				</mxCell>
			</Symbol>
		</add>
                
		<add as="symbol">
			<Symbol label="Symbol" description="" href="">
				<mxCell vertex="1" style="symbol;image=images/symbols/event.png">		
					<mxGeometry as="geometry" width="32" height="32"/>
				</mxCell>
			</Symbol>
		</add>
	</Array>      
	<add as="createTasks"><![CDATA[
		function (div) {
			var off = 30;
			if (this.graph != null)
			{
				var layer = this.graph.model.root.getChildAt(0);
				mxUtils.para(div,  mxResources.get('examples'));
				mxUtils.linkInvoke(div, mxResources.get('newDiagram'), this,
					'open', 'diagrams/empty.xml', off);
				mxUtils.br(div);
				mxUtils.linkInvoke(div, mxResources.get('swimlanes'), this,
					'open', 'diagrams/swimlanes.xml', off);
				mxUtils.br(div);
				mxUtils.linkInvoke(div, mxResources.get('withdraw'), this,
					'open', 'diagrams/withdrawal.xml', off);
				mxUtils.br(div);
				mxUtils.linkInvoke(div, mxResources.get('cloudmaester'), this,
					'open', 'diagrams/cloudmaester.xml', off);
				mxUtils.br(div);            
				mxUtils.linkInvoke(div, mxResources.get('travelBooking'), this,
					'open', 'diagrams/travel-booking.xml', off);
				mxUtils.br(div);
            
				
				if (!this.graph.isSelectionEmpty())
				{
					var cell = this.graph.getSelectionCell();
					if (this.graph.getSelectionCount() == 1 &&
						(this.graph.model.isVertex(cell) &&
						cell.getEdgeCount() > 0) || this.graph.isSwimlane(cell))
					{
						mxUtils.para(div, 'Layout');
						mxUtils.linkAction(div, mxResources.get('verticalTree'),
							this, 'verticalTree', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('horizontalTree'),
							this, 'horizontalTree', off);
						mxUtils.br(div);
					}
					
					mxUtils.para(div, 'Format');
					
					if (mxUtils.isNode(cell.value, 'Symbol'))
					{
						mxUtils.linkAction(div, mxResources.get('image'),
							this, 'image', off);
						mxUtils.br(div);
					}
					else
					{
						mxUtils.linkAction(div, mxResources.get('opacity'),
							this, 'opacity', off);
						mxUtils.br(div);
						if (this.graph.model.isVertex(cell) ||
							(cell.style != null && 
							cell.style.indexOf("arrowEdge") >= 0))
						{
							mxUtils.linkAction(div, mxResources.get('gradientColor'),
								this, 'gradientColor', off);
							mxUtils.br(div);
						}
						if (this.graph.model.isEdge(cell))
						{
							mxUtils.linkAction(div, 'Straight Connector', this, 'straightConnector', off);
							mxUtils.br(div);
							mxUtils.linkAction(div, 'Elbow Connector', this, 'elbowConnector', off);
							mxUtils.br(div);
							mxUtils.linkAction(div, 'Arrow Connector', this, 'arrowConnector', off);
							mxUtils.br(div);
						}
					}
					
					mxUtils.linkAction(div, 'Rounded', this, 'toggleRounded', off);
					mxUtils.br(div);
					if (this.graph.isSwimlane(cell) || this.graph.model.isEdge(cell))
					{
						mxUtils.linkAction(div, 'Orientation', this, 'toggleOrientation', off);
						mxUtils.br(div);
					}
					
					if (this.graph.getSelectionCount() > 1)
					{
						mxUtils.para(div, mxResources.get('align'));
						mxUtils.linkAction(div, mxResources.get('left'),
							this, 'alignCellsLeft', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('center'),
							this, 'alignCellsCenter', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('right'),
							this, 'alignCellsRight', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('top'),
							this, 'alignCellsTop', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('middle'),
							this, 'alignCellsMiddle', off);
						mxUtils.br(div);
						mxUtils.linkAction(div, mxResources.get('bottom'),
							this, 'alignCellsBottom', off);
						mxUtils.br(div);
					}
					
					mxUtils.para(div, mxResources.get('selection'));
					mxUtils.linkAction(div, mxResources.get('clearSelection'),
						this, 'selectNone', off);
					mxUtils.br(div);
				}
				else if (layer.getChildCount() > 0)
				{
					mxUtils.para(div, mxResources.get('selection'));
					mxUtils.linkAction(div, mxResources.get('selectAll'),
						this, 'selectAll', off);
					mxUtils.br(div);
				}
				
				mxUtils.br(div);
			}
		}
	]]></add>
</mxEditor>
